# 503 - ç”»åƒåˆ†æç»Ÿä¸€ç³»ç»Ÿ

åŸºäºç»Ÿè®¡è§„åˆ™çš„ç”¨æˆ·ç”»åƒå’Œç›®æ ‡ç”»åƒç»Ÿä¸€åˆ†æå¹³å°ã€‚

## ğŸ¯ é¡¹ç›®ç‰¹ç‚¹

- **ç»Ÿä¸€æ¶æ„** - ç”¨æˆ·ç”»åƒå’Œç›®æ ‡ç”»åƒå…±äº«ç»Ÿä¸€çš„ä»£ç ç»“æ„
- **æ¨¡å—åŒ–è®¾è®¡** - modelsã€algorithmsã€utils ä¸‰å±‚æ¸…æ™°åˆ†ç¦»
- **é›¶å†—ä½™** - æ¶ˆé™¤æ‰€æœ‰é‡å¤ä»£ç ï¼Œå•ä¸€æ•°æ®æº
- **ç®€æ´é«˜æ•ˆ** - ç²¾ç®€çš„é¡¹ç›®ç»“æ„ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
503/
â”œâ”€â”€ src/                        # æºä»£ç 
â”‚   â”œâ”€â”€ models/                 # ç»Ÿä¸€æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ mission.py          # ä»»åŠ¡æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ target_info.py      # ç›®æ ‡ä¿¡æ¯æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ user_persona.py     # ç”¨æˆ·ç”»åƒæ¨¡å‹
â”‚   â”‚   â””â”€â”€ target_profile.py   # ç›®æ ‡ç”»åƒæ¨¡å‹
â”‚   â”‚
â”‚   â”œâ”€â”€ algorithms/             # ç»Ÿä¸€ç®—æ³•æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ user_persona_algorithm.py      # ç”¨æˆ·ç”»åƒç®—æ³•
â”‚   â”‚   â”œâ”€â”€ target_profile_algorithm.py    # ç›®æ ‡ç”»åƒç®—æ³•
â”‚   â”‚   â”œâ”€â”€ persona_tag_calculator.py      # ç”¨æˆ·æ ‡ç­¾è®¡ç®—å™¨
â”‚   â”‚   â””â”€â”€ target_tag_calculator.py       # ç›®æ ‡æ ‡ç­¾è®¡ç®—å™¨
â”‚   â”‚
â”‚   â””â”€â”€ utils/                  # ç»Ÿä¸€å·¥å…·æ¨¡å—
â”‚       â”œâ”€â”€ user_data_generator.py         # ç”¨æˆ·æ•°æ®ç”Ÿæˆå™¨
â”‚       â”œâ”€â”€ target_data_generator.py       # ç›®æ ‡æ•°æ®ç”Ÿæˆå™¨
â”‚       â”œâ”€â”€ frequency_utils.py             # é¢‘ç‡åˆ†æå·¥å…·
â”‚       â””â”€â”€ spatial_utils.py               # ç©ºé—´èšç±»å·¥å…·
â”‚
â”œâ”€â”€ config/                     # é…ç½®æ–‡ä»¶
â”œâ”€â”€ outputs/                    # è¾“å‡ºç›®å½•
â”œâ”€â”€ test.py                     # ç»Ÿä¸€æµ‹è¯•è„šæœ¬
â”œâ”€â”€ requirements.txt            # ä¾èµ–ç®¡ç†
â””â”€â”€ README.md                   # é¡¹ç›®è¯´æ˜ï¼ˆæœ¬æ–‡ä»¶ï¼‰
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### è¿è¡Œæµ‹è¯•

```bash
python test.py
```

è¿™å°†è‡ªåŠ¨æµ‹è¯•ç”¨æˆ·ç”»åƒå’Œç›®æ ‡ç”»åƒä¸¤ä¸ªæ¨¡å—ï¼Œç”Ÿæˆ50ä¸ªç›®æ ‡å’Œ10000æ¡ä»»åŠ¡ï¼Œå¹¶è¾“å‡ºç»“æœåˆ° `outputs/` ç›®å½•ã€‚

---

## ğŸ’» ä½¿ç”¨ç¤ºä¾‹

### 1. ç”¨æˆ·ç”»åƒ

```python
import sys
from pathlib import Path

# æ·»åŠ é¡¹ç›®æ ¹ç›®å½•åˆ°è·¯å¾„
sys.path.insert(0, str(Path(__file__).parent))

from src.algorithms import UserPersonaAlgorithm
from src.utils import generate_sample_data

# ç”Ÿæˆæµ‹è¯•æ•°æ®
targets, missions = generate_sample_data(num_targets=100, num_missions=50000)

# åˆ›å»ºç®—æ³•å®ä¾‹
algorithm = UserPersonaAlgorithm()

# ç”Ÿæˆç”¨æˆ·ç”»åƒ
personas = algorithm.generate_user_persona(
    target_info=targets,
    mission=missions,
    algorithm={'preference_algorithm': 'auto', 'top_n': 3}
)

# è¾“å‡ºç»“æœ
for persona in personas:
    print(persona.to_dict())
```

### 2. ç›®æ ‡ç”»åƒ

```python
import sys
from pathlib import Path

# æ·»åŠ é¡¹ç›®æ ¹ç›®å½•åˆ°è·¯å¾„
sys.path.insert(0, str(Path(__file__).parent))

from src.algorithms import TargetProfileAlgorithm
from src.utils import generate_smart_data

# ç”Ÿæˆæµ‹è¯•æ•°æ®
targets, missions = generate_smart_data(num_targets=100, num_missions=50000)

# åˆ›å»ºç®—æ³•å®ä¾‹
algorithm = TargetProfileAlgorithm()

# ç”Ÿæˆç›®æ ‡ç”»åƒ
profiles = algorithm.generate_target_profile(
    target_info=targets,
    mission=missions,
    algorithm={'top_n': 3, 'spatial_eps_km': 60.0}
)

# è¾“å‡ºç»“æœ
for profile in profiles:
    print(profile.to_dict())
```

---

## ğŸ“Š åŠŸèƒ½æ¨¡å—

### ç”¨æˆ·ç”»åƒ

**åˆ†æå¯¹è±¡**: ä¾¦å¯Ÿéœ€æ±‚çš„æå‡ºç”¨æˆ·

**ç”»åƒç»´åº¦**:
- ææŠ¥éœ€æ±‚é¢‘ç‡
- ä¾¦å¯Ÿç›®æ ‡å æ¯”ï¼ˆæ”¯æŒ4ç§ç®—æ³•ï¼špercentage, zscore, tfidf, bm25ï¼‰
- åŒºåŸŸåˆ†å¸ƒåå¥½
- ç›®æ ‡ç±»åˆ«åå¥½
- ä¸“é¢˜åˆ†ç»„åå¥½
- ä¾¦å¯Ÿåœºæ™¯åå¥½

**æ ¸å¿ƒç®—æ³•**:
- HHIé›†ä¸­åº¦æŒ‡æ•° - åˆ¤æ–­ç”¨æˆ·éœ€æ±‚åˆ†æ•£/é›†ä¸­ç‰¹å¾
- Z-Score - ç»Ÿè®¡æ˜¾è‘—æ€§è¿‡æ»¤
- TF-IDF - è¯†åˆ«ç”¨æˆ·ç‹¬ç‰¹åå¥½
- BM25 - TF-IDFæ”¹è¿›ç‰ˆï¼Œå¸¦é¥±å’Œæ§åˆ¶

### ç›®æ ‡ç”»åƒ

**åˆ†æå¯¹è±¡**: ä¾¦å¯Ÿç›®æ ‡

**ç”»åƒç»´åº¦**:
- ä¾¦å¯Ÿå‘¨æœŸæ ‡ç­¾
- ä¾¦å¯Ÿé¢‘ç‡æ ‡ç­¾
- åçˆ±ä¾¦å¯Ÿåœºæ™¯
- ç©ºé—´å¯†åº¦æ ‡ç­¾ï¼ˆDBSCANèšç±»ï¼‰
- ç›®æ ‡ç±»å‹æ ‡ç­¾
- ç›®æ ‡ä¼˜å…ˆçº§æ ‡ç­¾

**æ ¸å¿ƒç®—æ³•**:
- DBSCANç©ºé—´èšç±» - è¯†åˆ«ç›®æ ‡ç©ºé—´åˆ†å¸ƒæ¨¡å¼
- å‘¨æœŸé¢‘ç‡åˆ†æ - è§£æä¾¦å¯Ÿå‘¨æœŸå’Œé¢‘æ¬¡
- åœºæ™¯ç»Ÿè®¡ - Top-Nåœºæ™¯ç»„åˆåˆ†æ

---

## ğŸ”§ é…ç½®è¯´æ˜

### ç®—æ³•é…ç½® (`config/algorithm_config.py`)

```python
# ç”¨æˆ·ç”»åƒé…ç½®
USER_PERSONA_CONFIG = {
    'preference_algorithm': 'auto',  # åå¥½ç®—æ³•ï¼šauto/percentage/zscore/tfidf/bm25
    'top_n': 3,                      # Top-Nç»“æœæ•°é‡
}

# ç›®æ ‡ç”»åƒé…ç½®
TARGET_PROFILE_CONFIG = {
    'top_n': 3,                      # Top-Nç»“æœæ•°é‡
    'spatial_eps_km': 60.0,          # DBSCANé‚»åŸŸåŠå¾„ï¼ˆå…¬é‡Œï¼‰
    'spatial_min_samples': 4,        # DBSCANæœ€å°æ ·æœ¬æ•°
    'spatial_auto_tune': True,       # æ˜¯å¦è‡ªåŠ¨è°ƒå‚
    'spatial_min_clusters': 7,       # æœŸæœ›çš„æœ€å°ç°‡æ•°
}
```

---

## ğŸ“¦ ä¾èµ–é¡¹

- **Python**: 3.7+
- **NumPy**: æ•°å€¼è®¡ç®—
- **scikit-learn**: ç©ºé—´èšç±»ï¼ˆDBSCANï¼‰
- **matplotlib**: å¯è§†åŒ–ï¼ˆå¯é€‰ï¼‰

---

## ğŸ“ˆ ä¼˜åŒ–äº®ç‚¹

ä¸åŸé¡¹ç›®ç›¸æ¯”ï¼Œæ–°æ¶æ„å®ç°äº†ï¼š

### ç»“æ„ä¼˜åŒ–
- âœ… **ç»Ÿä¸€models** - ä»2ä¸ªmodelsç›®å½•åˆå¹¶ä¸º1ä¸ª
- âœ… **ç»Ÿä¸€algorithms** - ä»2ä¸ªcoreç›®å½•åˆå¹¶ä¸º1ä¸ª
- âœ… **ç»Ÿä¸€utils** - ä»2ä¸ªutilsç›®å½•åˆå¹¶ä¸º1ä¸ª

### ä»£ç ç²¾ç®€
- âœ… **æ¶ˆé™¤é‡å¤** - åˆ é™¤çº¦60%çš„é‡å¤ä»£ç 
- âœ… **ç»Ÿä¸€å¯¼å…¥** - æ‰€æœ‰æ¨¡å—ä½¿ç”¨ç»Ÿä¸€çš„å¯¼å…¥è·¯å¾„
- âœ… **æ¸…æ™°åˆ†å±‚** - models â†’ algorithms â†’ utils ä¸‰å±‚æ¶æ„

### ç»´æŠ¤æ”¹è¿›
- âœ… **å•ä¸€æ•°æ®æº** - åŸºç¡€æ¨¡å‹åªéœ€ç»´æŠ¤ä¸€å¤„
- âœ… **æ˜“äºæ‰©å±•** - æ–°å¢åŠŸèƒ½æ›´æ–¹ä¾¿
- âœ… **æµ‹è¯•ç®€åŒ–** - ç»Ÿä¸€çš„æµ‹è¯•è„šæœ¬

---

## ğŸ“ ç‰ˆæœ¬å†å²

- **v2.0.0** (2025-11-20): é¡¹ç›®é‡æ„ï¼Œç»Ÿä¸€æ¶æ„
- **v1.0.0** (2025-11-20): åˆå§‹é¡¹ç›®æ•´åˆ

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ã€‚

---

## ğŸ‰ æ€»ç»“

**503é¡¹ç›®** - çœŸæ­£çš„é¡¹ç›®åˆå¹¶ï¼Œä¸æ˜¯ç®€å•çš„æ–‡ä»¶å †å ï¼

- ç»Ÿä¸€çš„æ¶æ„è®¾è®¡
- é›¶å†—ä½™çš„ä»£ç ç»„ç»‡
- ç®€æ´é«˜æ•ˆçš„å®ç°æ–¹å¼

**ä¸€ä¸ªsrcç›®å½•ï¼Œç»Ÿä¸€å¤©ä¸‹ï¼** ğŸš€
